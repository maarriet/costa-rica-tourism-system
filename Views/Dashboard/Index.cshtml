@{
    ViewData["Title"] = "Sistema de Guía Local y Turismo - Costa Rica";
    Layout = "/Views/Shared/_Layout.cshtml";
}

@section Styles {
    <link href="/css/styles.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
}

<!-- Header -->
<header>
    <div class="header-content">
        <h1>Sistema de Guía Local y Turismo</h1>
        <p>Gestión completa del turismo local en Costa Rica</p>
        <div class="header-stats">
            <div class="stat-box">
                <i class="fas fa-map-marker-alt"></i>
                <span>125 Lugares</span>
            </div>
            <div class="stat-box">
                <i class="fas fa-calendar-check"></i>
                <span>89 Reservas Activas</span>
            </div>
            <div class="stat-box">
                <i class="fas fa-users"></i>
                <span>1,234 Usuarios</span>
            </div>
        </div>
    </div>
</header>

<!-- Navigation -->
<nav>
    <div class="nav-container">
        <div class="logo">
            <i class="fas fa-map-marked-alt"></i> Turismo CR
        </div>
        <ul class="nav-links" id="navLinks">
            <li><a href="/Places/Index"><i class="fas fa-map-marker-alt"></i> Lugares</a></li>
            <li><a href="/Categories/Index"><i class="fas fa-tags"></i> Categorías</a></li>
            <li><a href="/Reservations/Index"><i class="fas fa-calendar-check"></i> Reservas</a></li>
            <li><a href="/Reports/Index"><i class="fas fa-chart-bar"></i> Reportes</a></li>
        </ul>

        <!-- User Menu -->
        <div class="user-menu">
            <span class="user-name">
                <i class="fas fa-user"></i> @User.Identity.Name
            </span>
            <form asp-controller="Account" asp-action="Logout" method="post" style="display: inline;">
                <button type="submit" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
                </button>
            </form>
        </div>

        <div class="mobile-menu" id="mobileMenu">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
</nav>

<!-- Dashboard Section -->
<section id="dashboard" class="container fade-in">
    <div class="section-header">
        <h2><i class="fas fa-tachometer-alt"></i> Dashboard de Control</h2>
        <p>Resumen general del sistema en tiempo real</p>
    </div>

    <!-- API Widgets -->
    <div class="api-widgets-section">
        <div class="widget-grid">
            <!-- Reloj en Tiempo Real -->
            <div class="widget-card">
                <h4><i class="fas fa-clock"></i> Hora Actual - Costa Rica</h4>
                <div class="time-display">
                    <div id="currentTime" class="time-text">--:--:--</div>
                    <div id="currentDate" class="date-text">-- de ---- de ----</div>
                    <div class="timezone-text">Zona Horaria: CST (UTC-6)</div>
                </div>
            </div>

            <!-- Mapa de Costa Rica -->
            <div class="widget-card">
                <h4><i class="fas fa-map"></i> Mapa Interactivo - Costa Rica</h4>
                <div class="map-container">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2011285.2677128726!2d-86.11466166249999!3d9.748916999999999!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f92e56221acc925%3A0x6254f72535819a2b!2sCosta%20Rica!5e0!3m2!1ses!2scr!4v1639234567890!5m2!1ses!2scr"
                            width="100%"
                            height="200"
                            style="border:0;"
                            allowfullscreen=""
                            loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
            </div>

            <!-- Información Turística -->
            <div class="widget-card">
                <h4><i class="fas fa-info-circle"></i> Info Turística</h4>
                <div class="tourism-info">
                    <div class="info-item">
                        <i class="fas fa-thermometer-half"></i>
                        <span>Temperatura promedio: 24°C - 30°C</span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-umbrella"></i>
                        <span>Temporada seca: Dic - Abr</span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-leaf"></i>
                        <span>Temporada verde: May - Nov</span>
                    </div>
                </div>
            </div>

            <div class="widget-card">
                <h4><i class="fas fa-cloud-sun"></i> Clima - San José</h4>
                <div id="weatherWidget" class="weather-display">
                    <div class="weather-loading">Cargando información del clima...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Stats -->
    <div class="dashboard-stats">
        <div class="stat-card">
            <div class="stat-icon bg-primary">
                <i class="fas fa-map-marker-alt"></i>
            </div>
            <div class="stat-info">
                <h3>125</h3>
                <p>Lugares Turísticos</p>
                <small class="text-success"><i class="fas fa-arrow-up"></i> +12 este mes</small>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon bg-success">
                <i class="fas fa-calendar-check"></i>
            </div>
            <div class="stat-info">
                <h3>89</h3>
                <p>Reservas Activas</p>
                <small class="text-success"><i class="fas fa-arrow-up"></i> +23 esta semana</small>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon bg-warning">
                <i class="fas fa-clock"></i>
            </div>
            <div class="stat-info">
                <h3>15</h3>
                <p>Pendientes Check-In</p>
                <small class="text-warning"><i class="fas fa-exclamation-triangle"></i> Requieren atención</small>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon bg-info">
                <i class="fas fa-dollar-sign"></i>
            </div>
            <div class="stat-info">
                <h3>$45,230</h3>
                <p>Ingresos del Mes</p>
                <small class="text-success"><i class="fas fa-arrow-up"></i> +18% vs mes anterior</small>
            </div>
        </div>
    </div>

    <!-- Quick Access Buttons -->
    <div class="quick-access-section">
        <h3><i class="fas fa-rocket"></i> Acceso Rápido</h3>
        <div class="quick-access-grid">
            <a href="/Places/Index" class="quick-access-card">
                <div class="quick-icon bg-primary">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="quick-info">
                    <h4>Gestionar Lugares</h4>
                    <p>Ver, agregar y editar lugares turísticos</p>
                </div>
                <i class="fas fa-arrow-right"></i>
            </a>

            <a href="/Categories/Index" class="quick-access-card">
                <div class="quick-icon bg-success">
                    <i class="fas fa-tags"></i>
                </div>
                <div class="quick-info">
                    <h4>Administrar Categorías</h4>
                    <p>Organizar tipos de lugares turísticos</p>
                </div>
                <i class="fas fa-arrow-right"></i>
            </a>

            <a href="/Reservations/Index" class="quick-access-card">
                <div class="quick-icon bg-warning">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <div class="quick-info">
                    <h4>Control de Reservas</h4>
                    <p>Gestionar reservas y check-ins</p>
                </div>
                <i class="fas fa-arrow-right"></i>
            </a>

            <a href="/Reports/Index" class="quick-access-card">
                <div class="quick-icon bg-info">
                    <i class="fas fa-chart-bar"></i>
                </div>
                <div class="quick-info">
                    <h4>Ver Reportes</h4>
                    <p>Análisis y estadísticas del sistema</p>
                </div>
                <i class="fas fa-arrow-right"></i>
            </a>
            <a href="/ApiDocs/Index" class="dashboard-card">
                <div class="quick-icon bg-info">
                    <i class="fas fa-code"></i>
                </div>
                <div class="quick-info">
                    <h4>API REST</h4>
                    <p>Documentación y testing de endpoints</p>
                </div>
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>

    <!-- Charts and Recent Activity -->
    <div class="dashboard-content">
        <div class="chart-section">
            <div class="chart-card">
                <h3><i class="fas fa-chart-pie"></i> Reservas por Categoría</h3>
                <div class="chart-placeholder">
                    <canvas id="categoryChart" width="400" height="200"></canvas>
                </div>
            </div>
        </div>
        <div class="activity-section">
            <div class="activity-card">
                <h3><i class="fas fa-bell"></i> Alertas Recientes</h3>
                <div class="alert-list">
                    <div class="alert-item">
                        <i class="fas fa-exclamation-triangle text-warning"></i>
                        <div>
                            <strong>Reserva próxima</strong>
                            <p>Hotel Vista Mar - Check-in en 2 días</p>
                            <small>Hace 1 hora</small>
                        </div>
                    </div>
                    <div class="alert-item">
                        <i class="fas fa-check-circle text-success"></i>
                        <div>
                            <strong>Check-in completado</strong>
                            <p>Aventura Canopy - Cliente: Juan Pérez</p>
                            <small>Hace 3 horas</small>
                        </div>
                    </div>
                    <div class="alert-item">
                        <i class="fas fa-info-circle text-info"></i>
                        <div>
                            <strong>Nuevo lugar registrado</strong>
                            <p>Restaurante Típico La Casona</p>
                            <small>Hace 5 horas</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script src="~/js/tourism-system.js"></script>
}